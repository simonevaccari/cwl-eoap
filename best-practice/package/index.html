
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../application/">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.36">
    
    
      
        <title>Package Best Practices - CWL as a solution for Earth Observation portability</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.06209087.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../styles/css/app.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#application-package-best-practice" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CWL as a solution for Earth Observation portability" class="md-header__button md-logo" aria-label="CWL as a solution for Earth Observation portability" data-md-component="logo">
      
  <img src="../../assets/icon-eoap.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CWL as a solution for Earth Observation portability
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Package Best Practices
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CWL as a solution for Earth Observation portability" class="md-nav__button md-logo" aria-label="CWL as a solution for Earth Observation portability" data-md-component="logo">
      
  <img src="../../assets/icon-eoap.png" alt="logo">

    </a>
    CWL as a solution for Earth Observation portability
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Background
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Background
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/previous-ogc-testbeds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Previous OGC Testbeds
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/applications-pilot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OGC EO Applications Pilot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/eoap-best-practice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Best Practice for EO Application Package
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Common Workflow Language
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Common Workflow Language
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cwl/nutshell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CWL in a nutshell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cwl/cwl-eoap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CWL in the Best Practice for EO Application Package
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../yaml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding YAML syntax
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../usage-scenarios/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Scenarios
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Best Practices
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Best Practices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../application/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application Best Practices
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Package Best Practices
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Package Best Practices
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cwl-document" class="md-nav__link">
    <span class="md-ellipsis">
      CWL Document
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Command-Line Tool
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-additional-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Application Additional Metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources-for-the-runtime-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Resources for the runtime environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hands-on" class="md-nav__link">
    <span class="md-ellipsis">
      Hands-on
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirement-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Requirement classes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cwl-document" class="md-nav__link">
    <span class="md-ellipsis">
      CWL Document
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#command-line-tool" class="md-nav__link">
    <span class="md-ellipsis">
      Command-Line Tool
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application" class="md-nav__link">
    <span class="md-ellipsis">
      Application
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-additional-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Application Additional Metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources-for-the-runtime-environment" class="md-nav__link">
    <span class="md-ellipsis">
      Resources for the runtime environment
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hands-on" class="md-nav__link">
    <span class="md-ellipsis">
      Hands-on
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#requirement-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Requirement classes
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="application-package-best-practice">Application Package Best Practice</h1>
<p>A Package that complies with the <em>OGC Best Practice for Earth Observation Application Package</em> needs to:</p>
<ul>
<li>Be a valid CWL document with a single Workflow Class and at least one CommandLineTool Class</li>
<li>Define the command-line and respective arguments and container for each CommandLineTool</li>
<li>Define the Application parameters</li>
<li>Define the Application Design Pattern</li>
<li>Define the requirements for runtime environment</li>
</ul>
<p>The Workflow class steps field orchestrates the execution of the application command line and retrieves all the outputs of the processing steps.</p>
<h2 id="cwl-document">CWL Document</h2>
<p>The CWL Document references the Application parameters with the CWL class <em>Workflow</em> and the command lines tools and arguments with the CWL <em>CommandLineTool</em> classes.</p>
<div class="highlight"><pre><span></span><code><span id="__span-0-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.1</span>
</span><span id="__span-0-2"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-0-3"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-0-4"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop</span>
</span><span id="__span-0-5"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-0-6">
</span><span id="__span-0-7"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CommandLineTool</span>
</span><span id="__span-0-8"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop-cl</span>
</span><span id="__span-0-9"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span></code></pre></div>
<h2 id="command-line-tool">Command-Line Tool</h2>
<p>As stated previously, the command-line tool is a non-interactive executable program that reads some input, performs a computation, and terminates after producing some output.</p>
<p>The CWL <em>CommandLineTool</em> class defines the actual interface of the command-line tool and its arguments according to the CWL CommandLineTool standard.</p>
<p>The CWL explicitly supports the use of software container technologies, such as Docker or Podman, to enable portability of the underlying analysis tools. </p>
<p>The Application Package needs to explicitly provide for each command-line tool the container requirements defining the container image needed.</p>
<p>The CWL requirement <code>DockerRequirement</code> indicates that the component must be run in a container, and specifies how to fetch or build the image.</p>
<div class="highlight"><pre><span></span><code><span id="__span-1-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-1-2">
</span><span id="__span-1-3"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-1-4"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-1-5"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop</span>
</span><span id="__span-1-6"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-1-7">
</span><span id="__span-1-8"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CommandLineTool</span>
</span><span id="__span-1-9"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop-cl</span>
</span><span id="__span-1-10">
</span><span id="__span-1-11"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span>
</span><span id="__span-1-12"><span class="w">    </span><span class="nt">DockerRequirement</span><span class="p">:</span>
</span><span id="__span-1-13"><span class="w">      </span><span class="nt">dockerPull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost/crop:latest</span>
</span></code></pre></div>
<p>The field inputs defines the list of input parameters of the command-line that control how to run the tool. Each parameter has an id for the name of parameter, and a type field describing what types of values are valid for that parameter (e.g. <code>string</code>, <code>int</code>, <code>double</code>, <code>null</code>, <code>File</code>, <code>Directory</code>, <code>Any</code>). Additionally, if there are command-line bindings not directly associated with input parameters (e.g. fixed values or environment run-time values), the field arguments can also be used.</p>
<div class="highlight"><pre><span></span><code><span id="__span-2-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-2-2">
</span><span id="__span-2-3"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-2-4"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-2-5"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop</span>
</span><span id="__span-2-6"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-2-7">
</span><span id="__span-2-8"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CommandLineTool</span>
</span><span id="__span-2-9"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop-cl</span>
</span><span id="__span-2-10">
</span><span id="__span-2-11"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span>
</span><span id="__span-2-12"><span class="w">    </span><span class="nt">DockerRequirement</span><span class="p">:</span>
</span><span id="__span-2-13"><span class="w">      </span><span class="nt">dockerPull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost/crop:latest</span>
</span><span id="__span-2-14">
</span><span id="__span-2-15"><span class="w">  </span><span class="nt">baseCommand</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-m&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;app&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-2-16"><span class="w">  </span><span class="nt">arguments</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</span><span id="__span-2-17"><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-2-18"><span class="w">    </span><span class="nt">item</span><span class="p">:</span>
</span><span id="__span-2-19"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-2-20"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-2-21"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--input-item</span>
</span><span id="__span-2-22"><span class="w">    </span><span class="nt">aoi</span><span class="p">:</span>
</span><span id="__span-2-23"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-2-24"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-2-25"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--aoi</span>
</span><span id="__span-2-26"><span class="w">    </span><span class="nt">epsg</span><span class="p">:</span>
</span><span id="__span-2-27"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-2-28"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-2-29"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--epsg</span>
</span><span id="__span-2-30"><span class="w">    </span><span class="nt">band</span><span class="p">:</span>
</span><span id="__span-2-31"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-2-32"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-2-33"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--band</span>
</span><span id="__span-2-34"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span></code></pre></div>
<p>When the command-line is executed under CWL, the starting working directory is the designated output directory. The underlying tool or script records its results in the form of files created in the output directory.</p>
<p>All the outputs of the command line tool are retrieved at this level.</p>
<div class="highlight"><pre><span></span><code><span id="__span-3-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-3-2">
</span><span id="__span-3-3"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-3-4"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-3-5"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop</span>
</span><span id="__span-3-6"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-3-7">
</span><span id="__span-3-8"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CommandLineTool</span>
</span><span id="__span-3-9"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">crop-cl</span>
</span><span id="__span-3-10">
</span><span id="__span-3-11"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span>
</span><span id="__span-3-12"><span class="w">    </span><span class="nt">DockerRequirement</span><span class="p">:</span>
</span><span id="__span-3-13"><span class="w">      </span><span class="nt">dockerPull</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost/crop:latest</span>
</span><span id="__span-3-14">
</span><span id="__span-3-15"><span class="w">  </span><span class="nt">baseCommand</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;python&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;-m&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;app&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-3-16"><span class="w">  </span><span class="nt">arguments</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</span><span id="__span-3-17"><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-3-18"><span class="w">    </span><span class="nt">item</span><span class="p">:</span>
</span><span id="__span-3-19"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-3-20"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-3-21"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--input-item</span>
</span><span id="__span-3-22"><span class="w">    </span><span class="nt">aoi</span><span class="p">:</span>
</span><span id="__span-3-23"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-3-24"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-3-25"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--aoi</span>
</span><span id="__span-3-26"><span class="w">    </span><span class="nt">epsg</span><span class="p">:</span>
</span><span id="__span-3-27"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-3-28"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-3-29"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--epsg</span>
</span><span id="__span-3-30"><span class="w">    </span><span class="nt">band</span><span class="p">:</span>
</span><span id="__span-3-31"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-3-32"><span class="w">      </span><span class="nt">inputBinding</span><span class="p">:</span>
</span><span id="__span-3-33"><span class="w">          </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">--band</span>
</span><span id="__span-3-34"><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
</span><span id="__span-3-35"><span class="w">    </span><span class="nt">cropped</span><span class="p">:</span>
</span><span id="__span-3-36"><span class="w">      </span><span class="nt">outputBinding</span><span class="p">:</span>
</span><span id="__span-3-37"><span class="w">          </span><span class="nt">glob</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;*.tif&#39;</span>
</span><span id="__span-3-38"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">File</span>
</span></code></pre></div>
<h2 id="application">Application</h2>
<p>The CWL Workflow class defines the Application as an analysis task represented by a directed graph describing a sequence of operations that transform an input data set to output.</p>
<p>The Workflow class includes four basic blocks: identification, inputs, steps and outputs.</p>
<p>For the identification block, the CWL <em>Workflow</em> class supports the definition of a unique identifier (id), a short human-readable title (label) and a long human-readable description (doc) of the Application.</p>
<div class="highlight"><pre><span></span><code><span id="__span-4-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-4-2"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-4-3"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-4-4"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-4-5"><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and the otsu threshold</span>
</span><span id="__span-4-6"><span class="w">  </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and otsu threshold applied to a single Sentinel-2 COG STAC item</span>
</span></code></pre></div>
<p>For the inputs, the CWL <em>Workflow</em> class supports the definition of the input parameters of the process. Each input parameter has a corresponding identifier (the fieldâ€™s name), title (label), abstract (doc) and a type (type) that is mandatory according to the CWL <em>Workflow</em> specification.</p>
<div class="highlight"><pre><span></span><code><span id="__span-5-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-5-2"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-5-3"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-5-4"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-5-5"><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and the otsu threshold</span>
</span><span id="__span-5-6"><span class="w">  </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and otsu threshold applied to a single Sentinel-2 COG STAC item</span>
</span><span id="__span-5-7"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</span><span id="__span-5-8"><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-5-9"><span class="w">    </span><span class="nt">aoi</span><span class="p">:</span>
</span><span id="__span-5-10"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">area of interest</span>
</span><span id="__span-5-11"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">area of interest as a bounding box</span>
</span><span id="__span-5-12"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-5-13"><span class="w">    </span><span class="nt">epsg</span><span class="p">:</span>
</span><span id="__span-5-14"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EPSG code</span>
</span><span id="__span-5-15"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EPSG code</span>
</span><span id="__span-5-16"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-5-17"><span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EPSG:4326&quot;</span>
</span><span id="__span-5-18"><span class="w">    </span><span class="nt">bands</span><span class="p">:</span>
</span><span id="__span-5-19"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands used for the NDWI</span>
</span><span id="__span-5-20"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands used for the NDWI</span>
</span><span id="__span-5-21"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string[]</span>
</span><span id="__span-5-22"><span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;green&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;nir&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-5-23"><span class="w">    </span><span class="nt">item</span><span class="p">:</span>
</span><span id="__span-5-24"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reference to a STAC item</span>
</span><span id="__span-5-25"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STAC item reference</span>
</span><span id="__span-5-26"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span></code></pre></div>
<p>The workflow is managed by the steps field of the Workflow class that links the corresponding parameters with arguments of the command-line class defined in the previous section.</p>
<div class="highlight"><pre><span></span><code><span id="__span-6-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-6-2">
</span><span id="__span-6-3"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-6-4"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-6-5"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-6-6"><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and the otsu threshold</span>
</span><span id="__span-6-7"><span class="w">  </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and otsu threshold applied to a single Sentinel-2 COG STAC item</span>
</span><span id="__span-6-8"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</span><span id="__span-6-9"><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-6-10"><span class="w">    </span><span class="nt">aoi</span><span class="p">:</span>
</span><span id="__span-6-11"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">area of interest</span>
</span><span id="__span-6-12"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">area of interest as a bounding box</span>
</span><span id="__span-6-13"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-6-14"><span class="w">    </span><span class="nt">epsg</span><span class="p">:</span>
</span><span id="__span-6-15"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EPSG code</span>
</span><span id="__span-6-16"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EPSG code</span>
</span><span id="__span-6-17"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-6-18"><span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EPSG:4326&quot;</span>
</span><span id="__span-6-19"><span class="w">    </span><span class="nt">bands</span><span class="p">:</span>
</span><span id="__span-6-20"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands used for the NDWI</span>
</span><span id="__span-6-21"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands used for the NDWI</span>
</span><span id="__span-6-22"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string[]</span>
</span><span id="__span-6-23"><span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;green&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;nir&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-6-24"><span class="w">    </span><span class="nt">item</span><span class="p">:</span>
</span><span id="__span-6-25"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reference to a STAC item</span>
</span><span id="__span-6-26"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STAC item reference</span>
</span><span id="__span-6-27"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-6-28"><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
</span><span id="__span-6-29"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span><span id="__span-6-30"><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-6-31"><span class="w">    </span><span class="nt">node_detect</span><span class="p">:</span>
</span><span id="__span-6-32"><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#detect-water-body&quot;</span>
</span><span id="__span-6-33"><span class="w">      </span><span class="nt">in</span><span class="p">:</span>
</span><span id="__span-6-34"><span class="w">        </span><span class="nt">item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">item</span>
</span><span id="__span-6-35"><span class="w">        </span><span class="nt">aoi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aoi</span>
</span><span id="__span-6-36"><span class="w">        </span><span class="nt">epsg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">epsg</span>
</span><span id="__span-6-37"><span class="w">        </span><span class="nt">band</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands</span>
</span><span id="__span-6-38"><span class="w">      </span><span class="nt">out</span><span class="p">:</span>
</span><span id="__span-6-39"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stac-catalog</span>
</span></code></pre></div>
<p>For the outputs, the Workflow class includes the outputs section. This is a list of output fields where each field consists of an identifier and a data type.</p>
<div class="highlight"><pre><span></span><code><span id="__span-7-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.2</span>
</span><span id="__span-7-2">
</span><span id="__span-7-3"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-7-4"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-7-5"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-7-6"><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and the otsu threshold</span>
</span><span id="__span-7-7"><span class="w">  </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and otsu threshold applied to a single Sentinel-2 COG STAC item</span>
</span><span id="__span-7-8"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[]</span>
</span><span id="__span-7-9"><span class="w">  </span><span class="nt">inputs</span><span class="p">:</span>
</span><span id="__span-7-10"><span class="w">    </span><span class="nt">aoi</span><span class="p">:</span>
</span><span id="__span-7-11"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">area of interest</span>
</span><span id="__span-7-12"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">area of interest as a bounding box</span>
</span><span id="__span-7-13"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-7-14"><span class="w">    </span><span class="nt">epsg</span><span class="p">:</span>
</span><span id="__span-7-15"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EPSG code</span>
</span><span id="__span-7-16"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EPSG code</span>
</span><span id="__span-7-17"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-7-18"><span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;EPSG:4326&quot;</span>
</span><span id="__span-7-19"><span class="w">    </span><span class="nt">bands</span><span class="p">:</span>
</span><span id="__span-7-20"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands used for the NDWI</span>
</span><span id="__span-7-21"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands used for the NDWI</span>
</span><span id="__span-7-22"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string[]</span>
</span><span id="__span-7-23"><span class="w">      </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;green&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;nir&quot;</span><span class="p p-Indicator">]</span>
</span><span id="__span-7-24"><span class="w">    </span><span class="nt">item</span><span class="p">:</span>
</span><span id="__span-7-25"><span class="w">      </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Reference to a STAC item</span>
</span><span id="__span-7-26"><span class="w">      </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">STAC item reference</span>
</span><span id="__span-7-27"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</span><span id="__span-7-28"><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span>
</span><span id="__span-7-29"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stac_catalog</span>
</span><span id="__span-7-30"><span class="w">    </span><span class="nt">outputSource</span><span class="p">:</span>
</span><span id="__span-7-31"><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">node_detect/stac-catalog</span>
</span><span id="__span-7-32"><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Directory</span>
</span><span id="__span-7-33"><span class="w">  </span><span class="nt">steps</span><span class="p">:</span>
</span><span id="__span-7-34"><span class="w">    </span><span class="nt">node_detect</span><span class="p">:</span>
</span><span id="__span-7-35"><span class="w">      </span><span class="nt">run</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;#detect-water-body&quot;</span>
</span><span id="__span-7-36"><span class="w">      </span><span class="nt">in</span><span class="p">:</span>
</span><span id="__span-7-37"><span class="w">        </span><span class="nt">item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">item</span>
</span><span id="__span-7-38"><span class="w">        </span><span class="nt">aoi</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">aoi</span>
</span><span id="__span-7-39"><span class="w">        </span><span class="nt">epsg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">epsg</span>
</span><span id="__span-7-40"><span class="w">        </span><span class="nt">band</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bands</span>
</span><span id="__span-7-41"><span class="w">      </span><span class="nt">out</span><span class="p">:</span>
</span><span id="__span-7-42"><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">stac-catalog</span>
</span></code></pre></div>
<h2 id="application-additional-metadata">Application Additional Metadata</h2>
<p>The Application Package can include additional metadata in CWL descriptions and developers should provide a minimal amount of authorship information to encourage correct citation.</p>
<p>It is recommended to include additional metadata in the Application Package using schema.org class Person to define the author and contributions and properties like citation, codeRepository, dateCreated and license as seen in the next example.</p>
<div class="highlight"><pre><span></span><code><span id="__span-8-1"><span class="nt">cwlVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.0</span>
</span><span id="__span-8-2"><span class="nt">$namespaces</span><span class="p">:</span>
</span><span id="__span-8-3"><span class="w">  </span><span class="nt">s</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://schema.org/</span>
</span><span id="__span-8-4"><span class="nt">s:softwareVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.0.0</span>
</span><span id="__span-8-5"><span class="nt">schemas</span><span class="p">:</span>
</span><span id="__span-8-6"><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://schema.org/version/9.0/schemaorg-current-http.rdf</span>
</span><span id="__span-8-7"><span class="nt">$graph</span><span class="p">:</span>
</span><span id="__span-8-8"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Workflow</span>
</span><span id="__span-8-9"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
</span><span id="__span-8-10"><span class="w">  </span><span class="nt">label</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and the otsu threshold</span>
</span><span id="__span-8-11"><span class="w">  </span><span class="nt">doc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Water bodies detection based on NDWI and otsu threshold applied to a single Sentinel-2 COG STAC item</span>
</span><span id="__span-8-12"><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</span></code></pre></div>
<h2 id="resources-for-the-runtime-environment">Resources for the runtime environment</h2>
<p>CWL provides a mechanism for expressing runtime environment resource requirements with the simple rule:</p>
<ul>
<li>min is the minimum amount of a resource that must be reserved to schedule a job. If min cannot be satisfied, the job should not be run.</li>
<li>max is the maximum amount of a resource that the job shall be permitted to use. If a node has sufficient resources, multiple jobs may be scheduled on a single node provided each jobâ€™s "max" resource requirements are met. If a job attempts to exceed its "max" resource allocation, an implementation may deny additional resources, which may result in job failure.</li>
</ul>
<p>Hardware resources are expressed with the CWL "ResourceRequirement" allowing the definition of:</p>
<ul>
<li>coresMin for the minimum reserved number of CPU cores</li>
<li>coresMax for the maximum reserved number of CPU cores</li>
<li>ramMin for the minimum reserved RAM in mebibytes</li>
<li>ramMax for the maximum reserved RAM in mebibytes</li>
</ul>
<p>This definition covers most of the application resource requirements needs.â€‹</p>
<p>If appropriate the Application Package can define resources for the runtime environment with ResourceRequirement class either at the level of each CommandLineTool classes or at the level of the Workflow class (that will be inherited to all CommandLineTool classes)</p>
<div class="highlight"><pre><span></span><code><span id="__span-9-1"><span class="nn">...</span>
</span><span id="__span-9-2"><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CommandLineTool</span>
</span><span id="__span-9-3"><span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">detect-water-body</span>
</span><span id="__span-9-4"><span class="w">  </span><span class="nt">requirements</span><span class="p">:</span>
</span><span id="__span-9-5"><span class="w">      </span><span class="nt">ResourceRequirement</span><span class="p">:</span>
</span><span id="__span-9-6"><span class="w">        </span><span class="nt">coresMax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id="__span-9-7"><span class="w">        </span><span class="nt">ramMax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512</span>
</span><span id="__span-9-8"><span class="nn">...</span>
</span></code></pre></div>
<h2 id="hands-on">Hands-on</h2>
<p>Open the notebook <em>03 Package</em> for a hands-on with a CWL runner</p>
<h2 id="requirement-classes">Requirement classes</h2>
<p><strong>Requirement 7</strong>   req/app-pck/cwl</p>
<p>The Application Package SHALL be a valid CWL document with a <code>Workflow</code> class and one or more <code>CommandLineTool</code> classes.</p>
<p><strong>Requirement 8</strong>   req/app-pck/clt</p>
<p>The Application Package CWL <code>CommandLineTool</code> classes SHALL contain the following elements:</p>
<ul>
<li>Identifier ("id")</li>
<li>Command line name ("baseCommand")</li>
<li>Input parameters ("inputs")</li>
<li>Environment requirements ("requirements")</li>
<li>Docker information ("DockerRequirement")</li>
</ul>
<p><strong>Requirement 9</strong>   req/app-pck/wf</p>
<p>The Application Package CWL <code>Workflow</code> class SHALL contain the following elements:</p>
<ul>
<li>Identifier ("id")</li>
<li>Title ("label")</li>
<li>Abstract ("doc")</li>
</ul>
<p><strong>Requirement 10</strong> req/app-pck/wf-inputs</p>
<p>The Application Package CWL <code>Workflow</code> class "inputs" fields SHALL contain the following elements:</p>
<ul>
<li>Identifier ("id")</li>
<li>Title ("label")</li>
<li>Abstract ("doc")</li>
</ul>
<p><strong>Requirement 11</strong> req/app-pck/metadata</p>
<p>The Application Package CWL <code>Workflow</code> class classes SHALL include additional metadata as defined in the Table 1 of the <em>OGC Best Practice for Earth Observation Application Package</em></p>
<p><strong>Recommendation 1</strong> rec/app-pck/fan-out</p>
<p>For applications with the fan-out design pattern, the Application Package CWL Workclass class MUST include the <code>ScatterFeatureRequirement</code> class in the <code>requirements</code> section and include the <code>scatterMethod</code> in the corresponding input of the step.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Maintained by Terradue
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
        <script src="../../javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>